# Alice LLM Bot

Сервер для интеграции Яндекс Алисы с различными LLM моделями (OpenAI, DeepSeek).

## Установка и запуск

### Предварительные требования

- Node.js (версия 18 или выше)
- npm или yarn
- API ключи для выбранного LLM провайдера (OpenAI или DeepSeek)

### Установка зависимостей

```bash
npm install
```

### Настройка переменных окружения

1. Создайте файл `.env` в корне проекта на основе `.env.example`:

```bash
cp .env.example .env
```

2. Отредактируйте файл `.env`, добавив ваши API ключи и настройки:

```
LLM_PROVIDER=openai  # openai или deepseek
LLM_MODEL=gpt-4o-mini  # или другая модель
OPENAI_API_KEY=ваш_ключ_openai
DEEPSEEK_API_KEY=ваш_ключ_deepseek
PORT=3000  # порт для запуска сервера
```

### Запуск для разработки

```bash
npm run dev
```

Сервер будет доступен по адресу http://localhost:3000

### Сборка и запуск для продакшена

```bash
npm run build
npm start
```

## Тестирование

Для проверки работы сервера вы можете отправить POST запрос на эндпоинт `/alice`:

```bash
curl -X POST http://localhost:3000/alice \
  -H "Content-Type: application/json" \
  -d '{"request":{"command":"Привет, как дела?"},"session":{"session_id":"test"},"version":"1.0"}'
```

Или проверить статус сервера через GET запрос:

```bash
curl http://localhost:3000/
```

## Деплой

### Деплой на VPS/VDS

1. Клонируйте репозиторий на сервер
2. Установите зависимости: `npm install`
3. Создайте файл `.env` с вашими API ключами
4. Соберите проект: `npm run build`
5. Запустите сервер: `npm start`

Для продакшена рекомендуется использовать PM2 или аналогичный менеджер процессов:

```bash
npm install -g pm2
pm2 start npm -- start
```

### Деплой на Vercel

1. Подключите ваш репозиторий к Vercel
2. Добавьте переменные окружения в настройках проекта
3. Настройте команду сборки: `npm run build`
4. Настройте команду запуска: `npm start`

### Деплой на Heroku

1. Создайте файл `Procfile` в корне проекта со следующим содержимым:
   ```
   web: npm start
   ```
2. Подключите ваш репозиторий к Heroku
3. Добавьте переменные окружения в настройках проекта
4. Выполните деплой

## Структура проекта

- `src/index.ts` - основной файл сервера
- `src/services/llm.ts` - сервис для работы с LLM API
- `src/types/alice.ts` - типы для запросов и ответов Алисы